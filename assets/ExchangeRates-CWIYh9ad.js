import{j as e,r as l,L as v}from"./index-BOlLIp-v.js";import{P as N}from"./PageWrapper-D6-RPKnQ.js";import{C as y}from"./CustomSelect-CpbbC2Oz.js";import{C as S}from"./CustomButton-BXkBqtDH.js";const k="_cards_17vh7_1",R="_source_17vh7_15",E="_error_17vh7_61",g={cards:k,source:R,error:E},F="_wrapper_13x20_1",I="_option_13x20_9",$="_flag_13x20_21",L="_fallbackFlag_13x20_37",_={wrapper:F,option:I,flag:$,fallbackFlag:L},D=({selected:s,setSelected:t,allCurrencies:i})=>{const o=i.filter(r=>!s.includes(r)).map(r=>({value:r,label:r})),d=r=>{if(!r)return;const c=[r.value,...s].slice(0,3);t(c)},h=({value:r,label:f})=>{const c=r.slice(0,2).toLowerCase();return e.jsxs("div",{className:_.option,children:[c?e.jsx("span",{className:`flag-icon flag-icon-${c} ${_.flag}`}):e.jsx("span",{className:_.fallbackFlag,children:"üåê"}),e.jsx("span",{children:f})]})};return e.jsx("div",{className:_.wrapper,children:e.jsx(y,{options:o,onChange:d,placeholder:"–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É",getOptionLabel:h})})},U="_card_1rfca_1",A="_header_1rfca_45",B="_flag_1rfca_59",O="_fallbackFlag_1rfca_75",J="_title_1rfca_89",P="_info_1rfca_97",T="_date_1rfca_107",n={card:U,header:A,flag:B,fallbackFlag:O,title:J,info:P,date:T},W=({rate:s})=>{const t=s.Cur_Abbreviation.slice(0,2).toLowerCase();return e.jsxs("a",{href:`https://www.nbrb.by/statistics/rates/ratesdaily/?paramcurrencyid=${s.Cur_ID}`,target:"_blank",rel:"noopener noreferrer",className:n.card,children:[e.jsxs("div",{className:n.header,children:[t?e.jsx("span",{className:`flag-icon flag-icon-${t} ${n.flag}`}):e.jsx("span",{className:n.fallbackFlag,children:"üåê"}),e.jsx("h3",{className:n.title,children:s.Cur_Abbreviation})]}),e.jsxs("div",{className:n.info,children:[e.jsx("strong",{children:s.Cur_OfficialRate.toFixed(4)})," BYN",e.jsx("br",{}),s.Cur_Scale>1&&e.jsx("span",{className:n.scale,children:s.Cur_Scale})," ",e.jsx("span",{children:s.Cur_Name})]}),e.jsxs("div",{className:n.date,children:["–û–±–Ω–æ–≤–ª–µ–Ω–æ: ",new Date(s.Date).toLocaleDateString("ru-RU",{weekday:"long",day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"UTC"})]})]})},G=()=>{const s=["USD","EUR","RUB"],[t,i]=l.useState([]),[o,d]=l.useState(()=>{const a=localStorage.getItem("selectedCurrencies");return a?JSON.parse(a):s}),[h,r]=l.useState([]),[f,c]=l.useState(!0),[p,m]=l.useState(null),x=async()=>{c(!0),m(null);try{const u=await fetch("https://www.nbrb.by/api/exrates/rates?periodicity=0");if(!u.ok)throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç: ",p);const j=await u.json();i(j),r(j.map(w=>w.Cur_Abbreviation))}catch(a){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç: ",a),m(a.message||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"),i([]),r([])}finally{c(!1)}};l.useEffect(()=>{localStorage.setItem("selectedCurrencies",JSON.stringify(o))},[o]),l.useEffect(()=>{x();const a=setInterval(()=>{x()},10*60*1e3);return()=>clearInterval(a)},[]);const b=()=>{localStorage.removeItem("selectedCurrencies"),d(s)};let C=null;return t&&(C=o.map(a=>t.find(u=>u.Cur_Abbreviation===a)).filter(Boolean)),e.jsxs(N,{children:[e.jsx("h1",{children:"–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–∫–∞ –†–ë"}),e.jsx(D,{selected:o,setSelected:d,allCurrencies:h}),e.jsx(S,{onClick:b,children:"–°–±—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä"}),f?e.jsx(v,{}):p?e.jsxs("p",{className:g.error,children:["–û—à–∏–±–∫–∞: ",p]}):t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:g.cards,children:C.map(a=>e.jsx(W,{rate:a},a.Cur_ID))}),e.jsxs("div",{className:g.source,children:[e.jsx("span",{role:"img","aria-label":"bank",children:"üè¶"})," –î–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã: ",e.jsx("a",{href:"https://www.nbrb.by/",target:"_blank",rel:"noopener noreferrer",children:"–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –±–∞–Ω–∫–æ–º –†–µ—Å–ø—É–±–ª–∏–∫–∏ –ë–µ–ª–∞—Ä—É—Å—å"})]})]}):e.jsx("p",{children:"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"})]})};export{G as default};
